language: minimal
dist: xenial

script:
- sudo /snap/bin/lxd.migrate -yes
- sudo /snap/bin/lxd waitready
- sudo /snap/bin/lxd init --auto
- sudo snapcraft --use-lxd

addons:
  snaps:
    - name: snapcraft
      channel: stable
      confinement: classic
    - name: lxd
      channel: stable

deploy:
  provider: snap
  snap: cjp256-ant-hello-world*.snap
  channel: edge

  # Use Travis' DPL v2 under development.
  edge:
    branch: master
